# evaljs ä½¿ç”¨æŒ‡å—

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### åˆ†æä»»æ„ç½‘ç«™çš„ä¸‰ç§æ–¹å¼

#### æ–¹å¼1: ä¸€é”®æ™ºèƒ½åˆ†æ (æ¨èæ–°æ‰‹)
```bash
# æ‰“å¼€ç½‘ç«™
agent-browser open "https://target-site.com"
agent-browser wait --load networkidle

# æ‰§è¡Œå®Œæ•´æ™ºèƒ½åˆ†æ
agent-browser eval "$(cat evaljs/analysis_pipeline.js)"
```

#### æ–¹å¼2: å¿«é€Ÿæµ‹è¯•
```bash
# å¿«é€Ÿæ£€æµ‹ç½‘ç«™åŸºæœ¬ä¿¡æ¯
agent-browser eval "$(cat evaljs/quick_test.js)"
```

#### æ–¹å¼3: æ‰‹åŠ¨åˆ†æ­¥åˆ†æ (é€‚åˆé«˜çº§ç”¨æˆ·)
```bash
# 1. æ£€æµ‹æŠ€æœ¯æ ˆ
agent-browser eval "$(cat evaljs/universal_detector.js)"

# 2. è·å–åˆ†æå»ºè®®
agent-browser eval "$(cat evaljs/adaptive_analyzer.js)"

# 3. æ ¹æ®å»ºè®®æ‰§è¡Œå…·ä½“è„šæœ¬
agent-browser eval "$(cat evaljs/vue_routes.js)"
agent-browser eval "$(cat evaljs/hook_network.js)"
```

## ğŸ“Š åˆ†æç»“æœè§£è¯»

### æ™ºèƒ½åˆ†æç»“æœç»“æ„
```json
{
  "stages": ["detection", "dynamic_vars", "adaptive_execution", "resource_stats"],
  "results": {
    "detection": {
      "frameworks": {"vue": true, "react": false},
      "libraries": {"axios": true, "echarts": false},
      "appTypes": {"loginPage": false, "adminSystem": true}
    },
    "adaptive_plan": {
      "prioritized": ["vue_routes.js", "hook_network.js"],
      "core": ["collect_all.js", "routes_all.js"]
    }
  },
  "recommendations": [
    "æ£€æµ‹åˆ°Vue.jsåº”ç”¨ï¼Œå»ºè®®æ‰§è¡Œvue_routes.jsè·å–è·¯ç”±ä¿¡æ¯",
    "æ£€æµ‹åˆ°Axiosï¼Œå»ºè®®æ‰§è¡Œhook_network.jsæ‹¦æˆªç½‘ç»œè¯·æ±‚"
  ]
}
```

## ğŸ¨ é’ˆå¯¹ä¸åŒåº”ç”¨åœºæ™¯çš„åˆ†æç­–ç•¥

### 1. Vue.js åº”ç”¨
```bash
agent-browser eval "$(cat evaljs/vue_routes.js)"           # Vueè·¯ç”±
agent-browser eval "$(cat evaljs/collect_runtime_config.js)" # é…ç½®å˜é‡
agent-browser eval "$(cat evaljs/extract_dynamic_routes.js)"  # åŠ¨æ€è·¯ç”±
```

### 2. React åº”ç”¨
```bash
agent-browser eval "$(cat evaljs/react_routes.js)"         # Reactè·¯ç”±
agent-browser eval "$(cat evaljs/collect_data_attrs.js)"   # æ•°æ®å±æ€§
agent-browser eval "$(cat evaljs/collect_scripts.js)"      # è„šæœ¬åˆ†æ
```

### 3. Angular åº”ç”¨
```bash
agent-browser eval "$(cat evaljs/angular_routes.js)"       # Angularè·¯ç”±
agent-browser eval "$(cat evaljs/collect_scripts.js)"      # è„šæœ¬åˆ†æ
```

### 4. jQuery åº”ç”¨
```bash
agent-browser eval "$(cat evaljs/hook_network.js)"         # AJAXç›‘æ§
agent-browser eval "$(cat evaljs/collect_scripts.js)"      # è„šæœ¬åˆ†æ
```

### 5. Layui åº”ç”¨
```bash
agent-browser eval "$(cat evaljs/collect_data_attrs.js)"   # Layuiæ•°æ®å±æ€§
agent-browser eval "$(cat evaljs/collect_scripts.js)"      # è„šæœ¬åˆ†æ
```

### 6. ç®¡ç†ç³»ç»Ÿ
```bash
agent-browser eval "$(cat evaljs/routes_all.js)"           # è·¯ç”±åˆ†æ
agent-browser eval "$(cat evaljs/collect_generic_config.js)" # é…ç½®å‘ç°
agent-browser eval "$(cat evaljs/collect_runtime_config.js)"  # è¿è¡Œæ—¶é…ç½®
```

### 7. ç™»å½•é¡µé¢
```bash
agent-browser eval "$(cat evaljs/collect_scripts.js)"      # è®¤è¯è„šæœ¬
agent-browser eval "$(cat evaljs/collect_runtime_config.js)" # ç™»å½•é…ç½®
agent-browser eval "$(cat evaljs/hook_network.js)"         # ç™»å½•è¯·æ±‚
```

### 8. PWA åº”ç”¨
```bash
agent-browser eval "$(cat evaljs/detect_service_worker.js)" # Service Worker
agent-browser eval "$(cat evaljs/collect_prefetch_preload.js)" # é¢„åŠ è½½èµ„æº
```

### 9. ä½¿ç”¨ES6æ¨¡å—çš„ç½‘ç«™
```bash
agent-browser eval "$(cat evaljs/collect_es_modules.js)"   # æ¨¡å—åˆ†æ
agent-browser eval "$(cat evaljs/collect_scripts.js)"      # è„šæœ¬èµ„æº
```

### 10. æœ‰å†…è”è„šæœ¬çš„ç½‘ç«™
```bash
agent-browser eval "$(cat evaljs/collect_inline.js)"       # å†…è”è„šæœ¬
agent-browser eval "$(cat evaljs/collect_scripts.js)"      # æ‰€æœ‰è„šæœ¬
```

## ğŸ”§ é«˜çº§ç”¨æ³•

### ç½‘ç»œè¯·æ±‚ç›‘æ§
```bash
# 1. å®‰è£…ç½‘ç»œé’©å­
agent-browser eval "$(cat evaljs/hook_network.js)"

# 2. æ‰§è¡Œç”¨æˆ·æ“ä½œ (ç‚¹å‡»æŒ‰é’®ã€æäº¤è¡¨å•ç­‰)
# è¿™äº›æ“ä½œä¼šè§¦å‘ç½‘ç»œè¯·æ±‚

# 3. æ”¶é›†è¯·æ±‚æ•°æ®
agent-browser eval "$(cat evaljs/collect_perf_resources.js)"
```

### æ€§èƒ½èµ„æºåˆ†æ
```bash
agent-browser eval "$(cat evaljs/collect_perf_resources.js)" # æ€§èƒ½èµ„æº
agent-browser eval "$(cat evaljs/collect_websocket.js)"      # WebSocket
agent-browser eval "$(cat evaljs/collect_prefetch_preload.js)" # é¢„åŠ è½½
```

### æ‰“åŒ…å·¥å…·åˆ†æ
```bash
# Webpackåº”ç”¨
agent-browser eval "$(cat evaljs/collect_perf_resources.js)"

# Viteåº”ç”¨
agent-browser eval "$(cat evaljs/collect_es_modules.js)"

# RequireJSåº”ç”¨
agent-browser eval "$(cat evaljs/collect_requirejs_config.js)"
agent-browser eval "$(cat evaljs/collect_requirejs_fetched.js)"
```

## ğŸ“‹ è„šæœ¬è¾“å‡ºæ ¼å¼

æ‰€æœ‰è„šæœ¬è¾“å‡ºæ ‡å‡†çš„JSONæ ¼å¼ï¼š

```json
{
  "script_name": "vue_routes.js",
  "timestamp": "2024-01-27T10:00:00.000Z",
  "data": {
    // è„šæœ¬ç‰¹å®šçš„æ•°æ®ç»“æ„
  },
  "metadata": {
    "execution_time": 150,
    "error_count": 0
  }
}
```

## ğŸš¨ æ•…éšœæ’é™¤

### è„šæœ¬æ‰§è¡Œå¤±è´¥
```bash
# æ£€æŸ¥ç½‘ç«™æ˜¯å¦æ­£ç¡®åŠ è½½
agent-browser get url
agent-browser get title

# é‡æ–°æ‰§è¡Œæ£€æµ‹
agent-browser eval "$(cat evaljs/quick_test.js)"
```

### ç½‘ç»œè¯·æ±‚ç›‘æ§æ— æ•ˆ
```bash
# ç¡®ä¿åœ¨å®‰è£…é’©å­åæ‰§è¡Œæ“ä½œ
agent-browser eval "$(cat evaljs/hook_network.js)"
# ... æ‰§è¡Œç”¨æˆ·æ“ä½œ ...
agent-browser eval "$(cat evaljs/collect_perf_resources.js)"
```

### è·¯ç”±æ£€æµ‹ä¸ºç©º
```bash
# å°è¯•é€šç”¨è·¯ç”±æ£€æµ‹
agent-browser eval "$(cat evaljs/routes_all.js)"

# æˆ–ä½¿ç”¨åŠ¨æ€è·¯ç”±æå–
agent-browser eval "$(cat evaljs/extract_dynamic_routes.js)"
```

## ğŸ›ï¸ è‡ªå®šä¹‰æ‰©å±•

### æ·»åŠ æ–°çš„æ£€æµ‹è§„åˆ™
1. åœ¨ `universal_detector.js` ä¸­æ·»åŠ æ£€æµ‹é€»è¾‘
2. åœ¨ `adaptive_analyzer.js` ä¸­æ·»åŠ å†³ç­–é€»è¾‘
3. åˆ›å»ºå¯¹åº”çš„åˆ†æè„šæœ¬

### ä¿®æ”¹ä¼˜å…ˆçº§
ç¼–è¾‘ `manifest.json` ä¸­çš„ `frameworks` é…ç½®æ¥è°ƒæ•´è„šæœ¬ä¼˜å…ˆçº§ã€‚

## ğŸ“ˆ æœ€ä½³å®è·µ

1. **æ€»æ˜¯ä»æ™ºèƒ½åˆ†æå¼€å§‹**ï¼šä½¿ç”¨ `analysis_pipeline.js` è·å–å®Œæ•´æ¦‚å†µ
2. **æ ¹æ®åº”ç”¨ç±»å‹é€‰æ‹©è„šæœ¬**ï¼šä¸åŒç±»å‹çš„åº”ç”¨éœ€è¦ä¸åŒçš„åˆ†æé‡ç‚¹
3. **ç½‘ç»œç›‘æ§è¦åŠæ—¶**ï¼šåœ¨éœ€è¦ç›‘æ§çš„é¡µé¢ç«‹å³å®‰è£…é’©å­
4. **ç»“æœè¦æŒä¹…åŒ–**ï¼šå°†åˆ†æç»“æœä¿å­˜åˆ°æ–‡ä»¶ä»¥ä¾¿åç»­åˆ†æ
5. **åˆ†æ‰¹æ‰§è¡Œ**ï¼šå¯¹äºå¤§å‹åº”ç”¨ï¼Œå¯ä»¥åˆ†é˜¶æ®µæ‰§è¡Œåˆ†æè„šæœ¬

## ğŸ” ç»“æœåˆ†ææŠ€å·§

### è¯†åˆ«åº”ç”¨æ¶æ„
- Vue + Router â†’ å•é¡µåº”ç”¨(SPA)
- å¤šè·¯ç”± + Axios â†’ å‰åç«¯åˆ†ç¦»
- Service Worker â†’ PWAåº”ç”¨
- RequireJS â†’ ä¼ ç»Ÿæ¨¡å—åŒ–åº”ç”¨

### å‘ç°å®‰å…¨ä¿¡æ¯
- ç™»å½•è¡¨å• â†’ è®¤è¯æ¥å£
- APIç«¯ç‚¹ â†’ åç«¯æœåŠ¡
- é…ç½®å˜é‡ â†’ ç³»ç»Ÿè®¾ç½®

### æ€§èƒ½ä¼˜åŒ–å»ºè®®
- å¤§é‡å†…è”è„šæœ¬ â†’ è€ƒè™‘å¤–éƒ¨æ–‡ä»¶
- å¤šä¸ªå°æ–‡ä»¶ â†’ è€ƒè™‘æ‰“åŒ…åˆå¹¶
- æ— é¢„åŠ è½½ â†’ è€ƒè™‘èµ„æºé¢„åŠ è½½