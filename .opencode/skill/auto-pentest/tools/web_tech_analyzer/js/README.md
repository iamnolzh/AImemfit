# evaljs - Universal Web Application Analysis Framework v2.0

ä¸€ä¸ªæ™ºèƒ½ã€è‡ªé€‚åº”çš„Webåº”ç”¨åˆ†ææ¡†æ¶ï¼Œèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹å’Œåˆ†æå„ç§å‰ç«¯æ¡†æ¶ã€åº“å’ŒæŠ€æœ¯æ ˆçš„åº”ç”¨ã€‚

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ è‡ªé€‚åº”åˆ†æ
- **æ™ºèƒ½æ£€æµ‹**ï¼šè‡ªåŠ¨è¯†åˆ«æŠ€æœ¯æ ˆã€æ¡†æ¶å’Œåº”ç”¨ç±»å‹
- **åŠ¨æ€è§„åˆ’**ï¼šæ ¹æ®æ£€æµ‹ç»“æœç”Ÿæˆæœ€ä½³åˆ†æç­–ç•¥
- **ä¼˜å…ˆçº§æ’åº**ï¼šé«˜ä»·å€¼ä¿¡æ¯ä¼˜å…ˆæ”¶é›†
- **å¹¶è¡Œæ‰§è¡Œ**ï¼šæ™ºèƒ½è°ƒåº¦è„šæœ¬æ‰§è¡Œé¡ºåº

### ğŸ”§ å…¨é¢å…¼å®¹æ€§
æ”¯æŒ19ç§åº”ç”¨åœºæ™¯å’ŒæŠ€æœ¯æ ˆï¼š
- **æ¡†æ¶**ï¼šVue.js, React, Angular, jQuery, Layui
- **åº“**ï¼šBootstrap, ECharts, D3, Axios, Fetch API
- **æ‰“åŒ…å·¥å…·**ï¼šWebpack, Vite, RequireJS
- **åº”ç”¨ç±»å‹**ï¼šç™»å½•é¡µé¢, ç®¡ç†ç³»ç»Ÿ, SPA, PWA
- **æŠ€æœ¯ç‰¹å¾**ï¼šES6æ¨¡å—, å†…è”è„šæœ¬, æ•°æ®å±æ€§, é¢„åŠ è½½, Service Worker

## ğŸ“‹ ä½¿ç”¨æ–¹å¼

### ğŸƒâ€â™‚ï¸ ä¸€é”®æ™ºèƒ½åˆ†æ (æ¨è)
```bash
# æ‰§è¡Œå®Œæ•´çš„è‡ªé€‚åº”åˆ†ææµæ°´çº¿
agent-browser eval "$(cat evaljs/analysis_pipeline.js)"
```

### ğŸ›ï¸ æ‰‹åŠ¨åˆ†æ­¥åˆ†æ
```bash
# 1. æŠ€æœ¯æ ˆæ£€æµ‹
agent-browser eval "$(cat evaljs/universal_detector.js)"

# 2. è‡ªé€‚åº”åˆ†æè§„åˆ’
agent-browser eval "$(cat evaljs/adaptive_analyzer.js)"

# 3. æ‰§è¡Œæ¨èè„šæœ¬ (æ ¹æ®ä¸Šä¸€æ­¥ç»“æœ)
```

### ğŸ” ä¸“é¡¹åˆ†æ
```bash
# Vueåº”ç”¨åˆ†æ
agent-browser eval "$(cat evaljs/vue_routes.js)"

# Reactåº”ç”¨åˆ†æ
agent-browser eval "$(cat evaljs/react_routes.js)"

# ç½‘ç»œè¯·æ±‚ç›‘æ§
agent-browser eval "$(cat evaljs/hook_network.js)"
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ä¸‰å±‚æ¶æ„
1. **æ£€æµ‹å±‚** (`universal_detector.js`) - è¯†åˆ«æŠ€æœ¯æ ˆå’Œåº”ç”¨ç‰¹å¾
2. **è§„åˆ’å±‚** (`adaptive_analyzer.js`) - ç”Ÿæˆåˆ†æç­–ç•¥å’Œä¼˜å…ˆçº§
3. **æ‰§è¡Œå±‚** (å„ä¸“é¡¹è„šæœ¬) - æ‰§è¡Œå…·ä½“çš„åˆ†æä»»åŠ¡

### è‡ªé€‚åº”ç®—æ³•
```javascript
æ£€æµ‹ç»“æœ â†’ åˆ†æç­–ç•¥ç”Ÿæˆ â†’ è„šæœ¬ä¼˜å…ˆçº§æ’åº â†’ æ™ºèƒ½æ‰§è¡Œè°ƒåº¦
```

## ğŸ“Š è„šæœ¬åˆ†ç±»

### ğŸš€ Pipeline Scripts (æµæ°´çº¿)
- `analysis_pipeline.js` - **ä¸€é”®æ‰§è¡Œå®Œæ•´åˆ†æ**
- `universal_detector.js` - é€šç”¨æŠ€æœ¯æ ˆæ£€æµ‹å™¨
- `adaptive_analyzer.js` - è‡ªé€‚åº”åˆ†æè§„åˆ’å™¨

### ğŸ” Detect Scripts (æ£€æµ‹)
- `detect_stack.js` - æ¡†æ¶å’Œåº“æ£€æµ‹
- `detect_service_worker.js` - PWAæ£€æµ‹
- `detect_dynamic_vars.js` - åŠ¨æ€å˜é‡å‘ç°
- `collect_all.js` - ç»¼åˆä¿¡æ¯æ”¶é›†

### ğŸ“Š Collect Scripts (æ”¶é›†)
- `collect_scripts.js` - è„šæœ¬èµ„æºåˆ†æ
- `collect_inline.js` - å†…è”è„šæœ¬æå–
- `collect_data_attrs.js` - æ•°æ®å±æ€§åˆ†æ
- `collect_generic_config.js` - é€šç”¨é…ç½®å‘ç°
- `collect_runtime_config.js` - è¿è¡Œæ—¶é…ç½®åˆ†æ
- `collect_perf_resources.js` - æ€§èƒ½èµ„æºç›‘æ§
- `collect_websocket.js` - WebSocketè¿æ¥åˆ†æ
- `collect_prefetch_preload.js` - é¢„åŠ è½½èµ„æºæ£€æµ‹
- `collect_es_modules.js` - ES6æ¨¡å—åˆ†æ
- `collect_requirejs_config.js` - RequireJSé…ç½®
- `collect_requirejs_fetched.js` - RequireJSæ¨¡å—è·Ÿè¸ª

### ğŸ›£ï¸ Route Scripts (è·¯ç”±)
- `routes_all.js` - å¤šæ¡†æ¶è·¯ç”±æ£€æµ‹
- `vue_routes.js` - Vue Routeråˆ†æ
- `react_routes.js` - React Routeråˆ†æ
- `angular_routes.js` - Angular Routeråˆ†æ
- `extract_dynamic_routes.js` - åŠ¨æ€è·¯ç”±æå–

### ğŸ£ Hook Scripts (é’©å­)
- `hook_network.js` - ç½‘ç»œè¯·æ±‚æ‹¦æˆª

## ğŸ¨ æ™ºèƒ½ç‰¹æ€§

### æ¡†æ¶è‡ªåŠ¨è¯†åˆ«
```javascript
// æ£€æµ‹åˆ°Vue â†’ è‡ªåŠ¨æ‰§è¡Œvue_routes.js
// æ£€æµ‹åˆ°React â†’ è‡ªåŠ¨æ‰§è¡Œreact_routes.js
// æ£€æµ‹åˆ°Axios â†’ è‡ªåŠ¨æ‰§è¡Œhook_network.js
```

### åº”ç”¨ç±»å‹è¯†åˆ«
```javascript
// ç™»å½•é¡µé¢ â†’ é‡ç‚¹åˆ†æè®¤è¯è„šæœ¬
// ç®¡ç†ç³»ç»Ÿ â†’ é‡ç‚¹åˆ†æè·¯ç”±å’Œé…ç½®
// PWAåº”ç”¨ â†’ é‡ç‚¹åˆ†æService Worker
```

### æŠ€æœ¯ç‰¹å¾é€‚é…
```javascript
// ES6æ¨¡å— â†’ æ‰§è¡Œcollect_es_modules.js
// å†…è”è„šæœ¬ â†’ æ‰§è¡Œcollect_inline.js
// æ•°æ®å±æ€§ â†’ æ‰§è¡Œcollect_data_attrs.js
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å¹¶è¡Œæ‰§è¡Œç­–ç•¥
- **ä½ä¾èµ–è„šæœ¬å¹¶è¡Œ**ï¼šæ£€æµ‹ç±»ã€æ”¶é›†ç±»è„šæœ¬å¯åŒæ—¶æ‰§è¡Œ
- **é«˜ä¾èµ–è„šæœ¬ä¸²è¡Œ**ï¼šè·¯ç”±ã€ç½‘ç»œé’©å­ç­‰éœ€è¦é¡ºåºæ‰§è¡Œ
- **æ™ºèƒ½è°ƒåº¦**ï¼šåŸºäºä¾èµ–å…³ç³»è‡ªåŠ¨å®‰æ’æ‰§è¡Œé¡ºåº

### é”™è¯¯å¤„ç†
- **ä¼˜é›…é™çº§**ï¼šå•ä¸ªè„šæœ¬å¤±è´¥ä¸å½±å“æ•´ä½“åˆ†æ
- **è¶…æ—¶æ§åˆ¶**ï¼šé˜²æ­¢è„šæœ¬æ‰§è¡Œæ—¶é—´è¿‡é•¿
- **èµ„æºé™åˆ¶**ï¼šè‡ªåŠ¨é™åˆ¶æ”¶é›†çš„æ•°æ®é‡

## ğŸ”§ æ‰©å±•æœºåˆ¶

### è‡ªå®šä¹‰è§„åˆ™
```javascript
// åœ¨manifest.jsonä¸­æ·»åŠ æ–°çš„æ¡†æ¶æ”¯æŒ
"frameworks": {
  "my-framework": ["custom_script.js", "another_script.js"]
}
```

### æ’ä»¶ç³»ç»Ÿ
```javascript
// æ”¯æŒåŠ è½½å¤–éƒ¨åˆ†æè„šæœ¬
// åŠ¨æ€æ³¨å†Œæ–°çš„æ£€æµ‹è§„åˆ™
// è‡ªå®šä¹‰åˆ†ææµç¨‹
```

## ğŸ“‹ è¾“å‡ºæ ¼å¼

æ‰€æœ‰è„šæœ¬è¾“å‡ºæ ‡å‡†JSONæ ¼å¼ï¼Œä¾¿äºï¼š
- **è§£æå¤„ç†**ï¼šç»Ÿä¸€çš„JSONç»“æ„
- **ç»“æœæ•´åˆ**ï¼šå¤šè„šæœ¬ç»“æœè‡ªåŠ¨åˆå¹¶
- **å¯è§†åŒ–å±•ç¤º**ï¼šæ”¯æŒå„ç§å‰ç«¯å±•ç¤ºç»„ä»¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åˆ†æä»»æ„ç½‘ç«™
```bash
# 1. æ‰“å¼€ç›®æ ‡ç½‘ç«™
agent-browser open "https://target-website.com"

# 2. æ‰§è¡Œæ™ºèƒ½åˆ†æ
agent-browser eval "$(cat evaljs/analysis_pipeline.js)"
```

### æŸ¥çœ‹åˆ†æç»“æœ
```bash
# ç»“æœä¼šè‡ªåŠ¨ä¿å­˜åˆ°å˜é‡ä¸­ï¼Œå¯ä»¥è¿›ä¸€æ­¥å¤„ç†
echo $result | jq '.recommendations'
```

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0 (å½“å‰ç‰ˆæœ¬)
- âœ… æ–°å¢è‡ªé€‚åº”åˆ†ææµæ°´çº¿
- âœ… æ”¯æŒ19ç§åº”ç”¨åœºæ™¯
- âœ… æ™ºèƒ½è„šæœ¬è°ƒåº¦å’Œä¼˜å…ˆçº§æ’åº
- âœ… å…¨é¢çš„é”™è¯¯å¤„ç†å’Œæ€§èƒ½ä¼˜åŒ–
- âœ… ç»Ÿä¸€çš„JSONè¾“å‡ºæ ¼å¼

### v1.1
- âœ… ç§»é™¤ç‰¹å®šç½‘ç«™ä¾èµ–
- âœ… æ–°å¢åŠ¨æ€å˜é‡æ£€æµ‹
- âœ… å¢å¼ºè·¨ç«™å…¼å®¹æ€§

### v1.0
- âœ… åŸºç¡€è„šæœ¬æ¡†æ¶
- âœ… å¤šæ¡†æ¶è·¯ç”±æ”¯æŒ
- âœ… ç½‘ç»œè¯·æ±‚æ‹¦æˆª

---

**ğŸ¯ è®¾è®¡ç†å¿µ**: è®©Webåº”ç”¨åˆ†æåƒå‘¼å¸ä¸€æ ·è‡ªç„¶ - æ£€æµ‹ã€åˆ†æã€è¾“å‡ºï¼Œä¸€æ°”å‘µæˆï¼
