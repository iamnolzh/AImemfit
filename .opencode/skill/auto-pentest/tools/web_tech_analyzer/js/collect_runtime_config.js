(() => {
  // 通用全局变量检测：$开头 + 框架相关变量
  const keys = Object.keys(window).filter(k =>
    k.startsWith('$') ||
    k.includes('VUE') ||
    k.includes('REACT') ||
    k.includes('ANGULAR') ||
    k.startsWith('__') && (k.includes('ROUTES') || k.includes('ROUTER'))
  );

  // 动态检测可能的配置对象
  const configCandidates = {};
  keys.forEach(key => {
    try {
      const val = window[key];
      if (val && typeof val === 'object' && !Array.isArray(val)) {
        // 只收集有意义的配置对象（非DOM对象、非函数）
        if (!val.nodeType && typeof val !== 'function') {
          configCandidates[key] = val;
        }
      }
    } catch (e) {}
  });

  return JSON.stringify({
    globals: keys.slice(0, 100),
    configCandidates: Object.keys(configCandidates).slice(0, 20),
    sampleConfigs: Object.fromEntries(
      Object.entries(configCandidates).slice(0, 5).map(([k, v]) => [k, JSON.stringify(v).slice(0, 200)])
    )
  });
})();
