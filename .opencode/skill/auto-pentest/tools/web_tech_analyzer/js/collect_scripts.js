(() => {
  const scripts = Array.from(document.scripts).map(s => ({
    src: s.src || null,
    type: s.type || null,
    async: !!s.async,
    defer: !!s.defer,
    nomodule: !!s.noModule,
    inline: !s.src,
    textSample: !s.src ? s.textContent.trim().slice(0, 200) : null
  }));
  return JSON.stringify({ scripts, inlineScriptCount: scripts.filter(s => s.inline).length });
})();
